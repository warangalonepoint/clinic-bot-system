<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Staff Panel</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; text-align: center; }
    .header { background: #000; color: #fff; padding: 10px; }
    .banner img { width: 100%; max-width: 500px; }
    .form-container { background: #fff; padding: 20px; margin: 20px auto; width: 90%; max-width: 400px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);}
    input, select { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
    button { padding: 10px 20px; background: black; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #333; }
    footer { position: fixed; bottom: 0; width: 100%; background: #000; color: #fff; padding: 5px; font-size: 14px; }
  </style>
</head>
<body>

<div class="header">
  <img src="./assets/logo.png" alt="Logo" style="height:30px;vertical-align:middle;"> Onestop AI Clinic Demo
</div>

<div class="banner">
  <img src="./assets/clinic-hero-banner.png" alt="Banner">
</div>

<div class="form-container">
  <h2>Add Staff</h2>
  <input type="text" id="staffName" placeholder="Name">
  <input type="text" id="staffRole" placeholder="Role">
  <input type="text" id="staffContact" placeholder="Contact">
  <select id="staffStatus">
    <option value="Active">Active</option>
    <option value="Inactive">Inactive</option>
  </select>
  <button onclick="addStaff()">Add Staff</button>
</div>

<div class="form-container">
  <h2>Delete Staff</h2>
  <input type="text" id="deleteName" placeholder="Enter Name to Delete">
  <button onclick="deleteStaff()">Delete Staff</button>
</div>

<footer>Powered by Onestop AI</footer>

<script>
  const airtableApiKey = 'patLNwoJQKE3Tjb8J.c2a0db129111c610fae64a2c01e0a626f37bdb5992232ea6ebc644fa9073dfb3';
  const baseId = 'appgIT8WiqnZlR44Y';
  const tableName = 'StaffList';

  async function addStaff() {
    const name = document.getElementById('staffName').value;
    const role = document.getElementById('staffRole').value;
    const contact = document.getElementById('staffContact').value;
    const status = document.getElementById('staffStatus').value;

    if (!name || !role || !contact) {
      alert('Please fill all fields.');
      return;
    }

    const data = {
      records: [
        {
          fields: {
            Name: name,
            Role: role,
            Contact: contact,
            Status: status
          }
        }
      ]
    };

    const response = await fetch(`https://api.airtable.com/v0/${baseId}/${tableName}`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${airtableApiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });

    if (response.ok) {
      alert('Staff added successfully!');
      location.reload();
    } else {
      alert('Failed to add staff.');
    }
  }

  async function deleteStaff() {
    const nameToDelete = document.getElementById('deleteName').value;
    if (!nameToDelete) {
      alert('Enter a name to delete.');
      return;
    }

    const listResponse = await fetch(`https://api.airtable.com/v0/${baseId}/${tableName}?filterByFormula={Name}="${nameToDelete}"`, {
      headers: { 'Authorization': `Bearer ${airtableApiKey}` }
    });

    const listData = await listResponse.json();

    if (listData.records.length === 0) {
      alert('No staff found with that name.');
      return;
    }

    const recordId = listData.records[0].id;

    const deleteResponse = await fetch(`https://api.airtable.com/v0/${baseId}/${tableName}/${recordId}`, {
      method: 'DELETE',
      headers: { 'Authorization': `Bearer ${airtableApiKey}` }
    });

    if (deleteResponse.ok) {
      alert('Staff deleted successfully!');
      location.reload();
    } else {
      alert('Failed to delete staff.');
    }
  }
</script>

</body>
</html>
