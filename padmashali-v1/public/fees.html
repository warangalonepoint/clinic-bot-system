<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Fees / Dues</title>
<style>
:root{color-scheme:dark}
body{margin:0;font-family:system-ui,Inter,Arial;background:#0f1115;color:#e8eaed}
.wrap{max-width:980px;margin:24px auto;padding:16px}
.bar{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
.btn{background:#2563eb;border:0;color:#fff;padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer}
.ghost{background:#11141a;border:1px solid #1f2432}
.pill{display:inline-flex;align-items:center;background:#0f1218;border:1px solid #262b38;padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer}
.card{background:#171a21;border:1px solid #222736;border-radius:18px;padding:18px;margin-top:14px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end}
.input{padding:12px;border-radius:12px;border:1px solid #262b38;background:#0f1218;color:#e8eaed}
.table{width:100%;border-collapse:separate;border-spacing:0 8px}
th,td{padding:10px 12px;text-align:left} tr{background:#11141a;border:1px solid #1f2432}
tr td:first-child, tr th:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px}
tr td:last-child, tr th:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px}
.badge{background:#0f1218;border:1px solid #262b38;border-radius:999px;padding:3px 8px;font-size:12px}
.muted{opacity:.75}
footer{opacity:.7;font-size:13px;margin:18px 0;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <div class="bar">
    <h2 style="margin:0">üí≥ <span data-i18n="fees">Fees</span></h2>
    <div class="row">
      <span id="lang-pill" class="pill" onclick="setLang(getLang()==='te'?'en':'te')">English ‚òÄÔ∏è</span>
      <button class="btn ghost" onclick="history.back()">Home</button>
    </div>
  </div>

  <div class="card">
    <b>Pay Dues</b>
    <div class="row" style="margin-top:10px">
      <input id="amt" class="input" type="number" placeholder="Amount (‚Çπ)">
      <input id="mode" class="input" placeholder="Mode (UPI/Cash)">
      <button class="btn" id="payBtn">Add Payment</button>
    </div>
  </div>

  <div class="card">
    <b>My Ledger</b>
    <table class="table"><thead>
      <tr><th>Date</th><th>Amount</th><th>Mode</th></tr>
    </thead><tbody id="mine"></tbody></table>
    <p class="muted" id="mineEmpty" style="display:none">No payments yet.</p>
    <p><b>Total Paid:</b> <span id="totalPaid">‚Çπ0</span></p>
  </div>

  <footer>¬© Padmashali Community ‚Äî V1</footer>
</div>

<script src="i18n.js"></script>
<script>
  const s=JSON.parse(localStorage.getItem("pc_session")||"null");
  if(!s){location.href='index.html';}
  if(!localStorage.getItem('pc_uid')) localStorage.setItem('pc_uid','U'+Math.random().toString(36).slice(2,10));
  const UID=localStorage.getItem('pc_uid');
  const K='pc_fees';

  function getAll(){return JSON.parse(localStorage.getItem(K)||'[]');}
  function setAll(v){localStorage.setItem(K,JSON.stringify(v));}
  function fmt(x){return '‚Çπ'+Number(x).toLocaleString('en-IN');}

  document.getElementById('payBtn').onclick=()=>{
    const amt=Number(document.getElementById('amt').value||0);
    const mode=document.getElementById('mode').value||'';
    if(!amt||!mode){alert('Enter amount & mode');return;}
    const list=getAll();
    list.push({id:'F'+Date.now().toString(36),uid:UID,name:s.role,name2:s.role,amount:amt,mode,ts:Date.now()});
    setAll(list);
    render();
  };

  function render(){
    const list=getAll();
    const mine=list.filter(x=>x.uid===UID).sort((a,b)=>b.ts-a.ts);
    const mineT=document.getElementById('mine'); mineT.innerHTML='';
    document.getElementById('mineEmpty').style.display=mine.length?'none':'block';
    let sum=0;
    mine.forEach(x=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${new Date(x.ts).toLocaleDateString('en-IN')}</td><td>${fmt(x.amount)}</td><td>${x.mode}</td>`;
      mineT.appendChild(tr); sum+=x.amount;
    });
    document.getElementById('totalPaid').textContent=fmt(sum);
  }

  applyI18n(); render();
</script>
</body></html>
