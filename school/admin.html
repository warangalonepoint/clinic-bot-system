<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin â€¢ School PWA</title>
  <script>
    (function(){var t=localStorage.getItem('theme')||new URLSearchParams(location.search).get('theme')||'dark';
      document.documentElement.classList.add(t);
      document.addEventListener('DOMContentLoaded',()=>document.body.classList.add(t));})();
  </script>
  <link rel="preload" href="styles.css?v=2025-08-15-2" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.css?v=2025-08-15-2"></noscript>
</head>
<body>
  <div class="wrapper">
    <section class="accent-pink">
      <div class="glass header">
        <div class="row between center">
          <div class="h1">Admin</div>
          <div class="row gap-8">
            <a class="chip" href="index.html">PIN</a>
            <button class="btn" onclick="toggleTheme()">Theme</button>
          </div>
        </div>
        <div class="tabs mt-12">
          <button class="tab chip chip-indigo" data-tab="scope" aria-selected="true">Scope</button>
          <button class="tab chip chip-blue"   data-tab="broadcast">Broadcast</button>
          <button class="tab chip chip-pink"   data-tab="leaves">Leaves</button>
          <button class="tab chip chip-teal"   data-tab="data">Data</button>
          <button class="tab chip chip-orange" data-tab="backup">Backup</button>
        </div>
      </div>
    </section>

    <section class="accent-pink">
      <!-- Scope -->
      <div class="glass mt-12 tabpanel" id="panel-scope">
        <div class="h2">Class Scope</div>
        <div class="grid mt-10">
          <input class="input" id="sClass" placeholder="Class eg, 5">
          <input class="input" id="sSec"   placeholder="Section eg, A">
          <button class="btn" id="sSave">Save</button>
        </div>
      </div>

      <!-- Broadcast -->
      <div class="glass mt-12 tabpanel hidden" id="panel-broadcast">
        <div class="h2">Broadcast to Parents</div>
        <div class="grid mt-10">
          <textarea class="input" id="abMsg" rows="3" placeholder="Message..."></textarea>
          <button class="btn" id="abSend">Send</button>
        </div>
        <div class="h3 mt-16">Sent</div>
        <div id="abList" class="list mt-8 text-dim">No broadcasts.</div>
      </div>

      <!-- Leaves -->
      <div class="glass mt-12 tabpanel hidden" id="panel-leaves">
        <div class="h2">Leave Requests</div>
        <div id="lvList" class="list mt-8 text-dim">No pending requests.</div>
      </div>

      <!-- Data -->
      <div class="glass mt-12 tabpanel hidden" id="panel-data">
        <div class="h2">Data</div>
        <p class="text-dim">This demo shows local data only.</p>
        <div class="row wrap gap-8 mt-10">
          <a class="btn" href="students.csv" download>Students.csv</a>
          <a class="btn" href="teachers.csv" download>Teachers.csv</a>
          <a class="btn" href="timetable.csv" download>Timetable.csv</a>
        </div>
      </div>

      <!-- Backup -->
      <div class="glass mt-12 tabpanel hidden" id="panel-backup">
        <div class="h2">Quick Backup / Restore</div>
        <div class="row wrap gap-8 mt-10">
          <button class="btn" id="bkBtn">Backup</button>
          <label class="btn"><input type="file" id="rsBtn" hidden><span>Restore</span></label>
        </div>
      </div>
    </section>
  </div>

  <script>
    function toggleTheme(){var c=document.documentElement.classList.contains('dark')?'dark':'light';
      var n=c==='dark'?'light':'dark';
      document.documentElement.classList.replace(c,n);document.body.classList.replace(c,n);
      localStorage.setItem('theme',n);}
    document.querySelectorAll('.tab').forEach(b=>b.addEventListener('click',()=>{
      document.querySelectorAll('.tab').forEach(x=>x.setAttribute('aria-selected','false'));
      b.setAttribute('aria-selected','true');
      const k=b.dataset.tab;
      document.querySelectorAll('.tabpanel').forEach(p=>p.classList.add('hidden'));
      document.getElementById('panel-'+k).classList.remove('hidden');
    }));
    document.getElementById('abSend').onclick=function(){
      const m=(abMsg.value||'').trim(); if(!m) return;
      const row=document.createElement('div'); row.className='item'; row.textContent=m;
      abList.appendChild(row); abList.classList.remove('text-dim'); abMsg.value='';
    };
  </script>

  <script type="module" src="ui.js?v=2025-08-15-2"></script>
</body>
</html>
