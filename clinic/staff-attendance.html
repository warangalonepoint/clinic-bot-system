<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Staff Attendance | Airtable Connected</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        input, select, button { display: block; width: 100%; padding: 12px; margin-top: 15px; border-radius: 10px; font-size: 16px; }
        button { background: black; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Staff Attendance Panel (Airtable Connected)</h2>

    <input type="text" id="staffName" placeholder="Staff Name">

    <select id="role">
        <option>Doctor</option>
        <option>Nurse</option>
        <option>Receptionist</option>
    </select>

    <select id="attendanceStatus">
        <option>Check-in</option>
        <option>Check-out</option>
    </select>

    <button onclick="markAttendance()">Mark Attendance</button>
    <div id="status" style="margin-top: 20px; color: green;"></div>

    <script>
        const API_KEY = 'patLNwoJQKE3Tjb8J.c2a0db129111c610fae64a2c01e0a626f37bdb5992232ea6ebc644fa9073dfb3';
        const BASE_ID = 'appgIT8WiqnZlR44Y';
        const TABLE_NAME = 'StaffAttendance';

        function markAttendance() {
            const staffName = document.getElementById('staffName').value.trim();
            const role = document.getElementById('role').value;
            const status = document.getElementById('attendanceStatus').value;

            if(staffName === "") {
                alert("Enter Staff Name.");
                return;
            }

            const data = {
                records: [
                    {
                        fields: {
                            "Timestamp": new Date().toLocaleString(),
                            "Staff Name": staffName,
                            "Role": role,
                            "Attendance Status": status
                        }
                    }
                ]
            };

            fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${API_KEY}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                document.getElementById('status').innerText = "Attendance Marked Successfully!";
                document.getElementById('staffName').value = "";
                document.getElementById('role').selectedIndex = 0;
                document.getElementById('attendanceStatus').selectedIndex = 0;
            })
            .catch(error => {
                console.error('Error:', error);
                alert("Failed to mark attendance.");
            });
        }
    </script>

</body>
</html>
