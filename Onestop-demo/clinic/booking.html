<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Clinic • Booking Bot</title>
<link rel="manifest" href="./manifest.webmanifest"><link rel="stylesheet" href="./styles.css">
<meta name="theme-color" content="#111"/>
<style>
main{max-width:720px;margin:16px auto;padding:16px}
input,select{width:100%;padding:12px;border:1px solid #ddd;border-radius:12px}
.iconbtn{display:flex;align-items:center;gap:10px}
.iconbtn img{width:22px;height:22px;border-radius:6px}
</style></head><body>
<main>
  <img class="banner" src="./assets/clinic_banner.png" alt="Clinic"/>

  <div class="card" style="margin-top:12px">
    <h2 style="margin:0 0 6px">Book an Appointment</h2>
    <p class="muted">Fast, no login. You’ll get a local confirmation token.</p>
    <label>Date <input id="d" type="date" style="margin:6px 0"></label>
    <label>Time Slot
      <select id="t" style="margin:6px 0">
        <option>09:00</option><option>09:30</option><option>10:00</option><option>10:30</option>
        <option>11:00</option><option>11:30</option><option>12:00</option><option>12:30</option>
        <option>17:00</option><option>17:30</option><option>18:00</option>
      </select>
    </label>
    <label>Name <input id="n" placeholder="Full name" style="margin:6px 0"></label>
    <label>Phone <input id="p" inputmode="numeric" maxlength="10" placeholder="10-digit" style="margin:6px 0"></label>
    <button class="btn iconbtn" id="book" style="width:100%;margin-top:8px"><img src="./assets/icons/book.png" onerror="this.style.display='none'">Confirm Booking</button>
    <div id="ok" style="margin-top:10px;color:#0d7c66"></div>
  </div>

  <div class="card" style="margin-top:12px">
    <h3 style="margin:0 0 6px">My Appointments (this device)</h3>
    <div id="mine" class="muted">None yet.</div>
    <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
      <a class="btn iconbtn" href="./index.html"><img src="./assets/icons/home.png" onerror="this.style.display='none'">Back to PIN</a>
      <a class="btn iconbtn" href="./doctor.html"><img src="./assets/icons/doctor.png" onerror="this.style.display='none'">Doctor View</a>
    </div>
  </div>
</main>
<script>
if("serviceWorker" in navigator){navigator.serviceWorker.register("./sw.js").catch(()=>{});}
const K={appts:"cl_a",mine:"cl_a_mine"}; const jget=k=>JSON.parse(localStorage.getItem(k)||"[]"); const jset=(k,v)=>localStorage.setItem(k,JSON.stringify(v));
document.getElementById("d").value=new Date().toISOString().slice(0,10);
function renderMine(){const rows=jget(K.mine); const div=document.getElementById("mine"); if(!rows.length){div.textContent="None yet.";return} div.innerHTML=rows.map(r=>`<div style="padding:8px;border:1px solid #eee;border-radius:12px;margin:6px 0">${r.date} ${r.time} — ${r.name} (${r.phone}) <span style="float:right">Token: <b>${r.token}</b></span></div>`).join("");}
renderMine();
document.getElementById("book").onclick=()=>{const date=d.value,time=t.value,name=n.value.trim(),phone=p.value.trim(); if(!date||!time||!name||phone.length!==10){alert("Fill all fields (10-digit phone)");return} const token=Math.random().toString(36).slice(2,8).toUpperCase(); const row={date,time,name,phone,status:"Booked",ts:Date.now(),token}; const ap=jget(K.appts); ap.push({date,time,name,phone,status:"Booked",ts:Date.now()}); jset(K.appts,ap); const mine=jget(K.mine); mine.push(row); jset(K.mine,mine); document.getElementById("ok").textContent="Booked ✅ Token: "+token+" (show this at the desk)"; renderMine();};
</script>
</body></html>
