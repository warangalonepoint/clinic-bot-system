<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Your Appointment</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <header>
    <h1>OneStop AI Clinic</h1>
  </header>  <section class="booking-form">
    <h2>Book Your Appointment</h2>
    <label for="date">Select Date</label>
    <select id="date" onchange="filterSlots()"></select><label for="slot">Select Time Slot</label>
<select id="slot"></select>

<label for="name">Full Name</label>
<input type="text" id="name" placeholder="Enter your name">

<label for="reason">Reason for Visit</label>
<textarea id="reason" placeholder="E.g., Consultation, Fever"></textarea>

<button onclick="bookNow()">Book via WhatsApp</button>

  </section>  <script>
    const slotsUrl = "slots.csv";
    let allSlots = [];

    function loadSlots() {
      fetch(slotsUrl)
        .then(res => res.text())
        .then(data => {
          const lines = data.trim().split('\n').slice(1);
          allSlots = lines.map(line => {
            const [date, time, status] = line.split(',');
            return { date, time, status };
          });
          populateDates();
        });
    }

    function populateDates() {
      const dateSelect = document.getElementById('date');
      const uniqueDates = [...new Set(allSlots.filter(s => s.status === 'Available').map(s => s.date))];
      dateSelect.innerHTML = '<option value="">Select Date</option>' + uniqueDates.map(d => `<option value="${d}">${d}</option>`).join('');
      filterSlots();
    }

    function filterSlots() {
      const selectedDate = document.getElementById('date').value;
      const slotSelect = document.getElementById('slot');
      const filteredSlots = allSlots.filter(s => s.date === selectedDate && s.status === 'Available');
      slotSelect.innerHTML = '<option value="">Select Slot</option>' + filteredSlots.map(s => `<option value="${s.time}">${s.time}</option>`).join('');
    }

    function bookNow() {
      const date = document.getElementById('date').value;
      const slot = document.getElementById('slot').value;
      const name = document.getElementById('name').value.trim();
      const reason = document.getElementById('reason').value.trim();

      if (!date || !slot || !name || !reason) {
        alert("Please fill all details.");
        return;
      }

      const message = `Booking Request:\nName: ${name}\nDate: ${date}\nTime: ${slot}\nReason: ${reason}`;
      window.open(`https://wa.me/918686019709?text=${encodeURIComponent(message)}`);
    }

    loadSlots();
  </script></body>
</html>
