<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Parents • School PWA</title>
  <script>
    (function(){var t=localStorage.getItem('theme')||new URLSearchParams(location.search).get('theme')||'dark';
      document.documentElement.classList.add(t);
      document.addEventListener('DOMContentLoaded',()=>document.body.classList.add(t));})();
  </script>
  <link rel="preload" href="styles.css?v=2025-08-15-2" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.css?v=2025-08-15-2"></noscript>
</head>
<body>
  <div class="wrapper">
    <section class="accent-indigo">
      <div class="glass header">
        <div class="row between center">
          <div class="h1">Parents</div>
          <div class="row gap-8">
            <a class="chip" href="index.html">PIN</a>
            <button class="btn" onclick="toggleTheme()">Theme</button>
          </div>
        </div>
        <div class="tabs mt-12">
          <button class="tab chip chip-indigo" data-tab="diary" aria-selected="true">Class Diary</button>
          <button class="tab chip chip-blue"   data-tab="homework">Homework</button>
          <button class="tab chip chip-pink"   data-tab="messages">Messages</button>
          <button class="tab chip chip-teal"   data-tab="leaves">Leaves</button>
        </div>
      </div>
    </section>

    <!-- Panels -->
    <section class="accent-indigo">
      <div class="glass mt-12 tabpanel" id="panel-diary">
        <div class="h2">Today’s Class Diary</div>
        <p class="text-dim">Teacher notes for the selected class.</p>
        <div id="diary-list" class="list mt-10"></div>
      </div>
      <div class="glass mt-12 tabpanel hidden" id="panel-homework">
        <div class="h2">Homework</div>
        <div id="hw-list" class="list mt-10"></div>
      </div>
      <div class="glass mt-12 tabpanel hidden" id="panel-messages">
        <div class="h2">Messages from Teachers</div>
        <div id="msg-list" class="list mt-10"></div>
      </div>
      <div class="glass mt-12 tabpanel hidden" id="panel-leaves">
        <div class="h2">Apply Leave</div>
        <form class="grid mt-10" id="leave-form" onsubmit="return false;">
          <select class="input" id="leave-day">
            <option value="1">1 day</option><option value="2">2 days</option>
            <option value="3">3 days</option>
          </select>
          <textarea class="input" id="leave-reason" rows="3" placeholder="Reason"></textarea>
          <button class="btn" id="leave-submit">Submit</button>
        </form>
        <div class="h3 mt-16">My Leave Requests</div>
        <div id="leave-list" class="list mt-8 text-dim">No leave requests.</div>
      </div>
    </section>
  </div>

  <!-- Tabs + Theme + Demo data -->
  <script>
    function toggleTheme(){
      var cur=document.documentElement.classList.contains('dark')?'dark':'light';
      var nxt=cur==='dark'?'light':'dark';
      document.documentElement.classList.replace(cur,nxt);
      document.body.classList.replace(cur,nxt);
      localStorage.setItem('theme',nxt);
    }
    // tabs
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(b=>b.setAttribute('aria-selected','false'));
        btn.setAttribute('aria-selected','true');
        const t=btn.dataset.tab;
        document.querySelectorAll('.tabpanel').forEach(p=>p.classList.add('hidden'));
        document.getElementById('panel-'+t).classList.remove('hidden');
      });
    });
    // demo content
    const diary=[{sub:'Maths',date:'2025-08-15',msg:'Fractions & examples'},
                 {sub:'Science',date:'2025-08-15',msg:'Plants and photosynthesis'}];
    const hw=[{sub:'Maths',due:'2025-08-16',msg:'Exercise 5A — Q1–10'},
              {sub:'English',due:'2025-08-17',msg:'Read Ch.3 — Make notes'}];
    const msgs=[{time:new Date().toLocaleString(),msg:'PTM on Friday 4 PM.'}];
    function render(){
      const d=document.getElementById('diary-list');
      d.innerHTML=diary.map(x=>`<div class="row between item"><b>${x.sub}</b><span class="text-dim">${x.date}</span><div>${x.msg}</div></div>`).join('');
      const h=document.getElementById('hw-list');
      h.innerHTML=hw.map(x=>`<div class="row between item"><b>${x.sub}</b><span class="text-dim">Due ${x.due}</span><div>${x.msg}</div></div>`).join('');
      const m=document.getElementById('msg-list');
      m.innerHTML=msgs.map(x=>`<div class="row between item"><span>${x.time}</span><div>${x.msg}</div></div>`).join('');
    }
    render();
    document.getElementById('leave-submit').addEventListener('click',()=>{
      const days=document.getElementById('leave-day').value;
      const reason=(document.getElementById('leave-reason').value||'').trim();
      if(!reason) return alert('Please add a reason.');
      const list=document.getElementById('leave-list');
      const row=document.createElement('div');
      row.className='item'; row.textContent=`${days} day(s) — ${reason}`;
      list.appendChild(row);
      document.getElementById('leave-reason').value='';
      list.classList.remove('text-dim'); list.textContent='';
    });
  </script>

  <script type="module" src="ui.js?v=2025-08-15-2"></script>
</body>
</html>
