<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patient Logs Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; color: #333; margin: 0; padding: 1rem; }
    h1 { text-align: center; margin-bottom: 1rem; }
    .filters { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 1rem; }
    .filters input, .filters select { padding: 5px; font-size: 1rem; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
    th, td { padding: 0.75rem; border: 1px solid #ccc; text-align: left; }
    th { background-color: #f0f0f0; }
    .export-buttons { display: flex; gap: 10px; justify-content: center; margin-bottom: 1rem; }
    canvas { max-width: 100%; margin-top: 2rem; }
    @media (max-width: 600px) {
      table, th, td { font-size: 0.8rem; }
      .filters { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body><h1>Patient List & Analytics</h1><div class="filters">
  <input type="text" id="searchName" placeholder="Search Name">
  <input type="text" id="searchReason" placeholder="Search Reason">
  <input type="date" id="filterDate">
</div><div class="export-buttons">
  <button onclick="exportTableToExcel('patientTable')">Export to Excel</button>
  <button onclick="exportToPDF()">Export to PDF</button>
</div><table id="patientTable">
  <thead>
    <tr>
      <th>Date</th><th>Time</th><th>Name</th><th>Reason</th><th>Contact</th><th>Token</th><th>Reminder Sent</th>
    </tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table><canvas id="bookingChart"></canvas>

<script>
const data = [
  { date: '2025-08-01', time: '09:00', name: 'Chaitanya Krishna', reason: 'Fever', contact: '+919876543210', token: 1, reminder: 'Yes' },
  { date: '2025-08-01', time: '09:10', name: 'Ravi Kumar', reason: 'Checkup', contact: '+918888888888', token: 2, reminder: 'Yes' },
  { date: '2025-08-01', time: '09:20', name: 'Anjali Sharma', reason: 'Consultation', contact: '+917777777777', token: 3, reminder: 'No' },
  { date: '2025-08-01', time: '09:30', name: 'Vikram Rao', reason: 'Follow-up', contact: '+919999999999', token: 4, reminder: 'Yes' },
  { date: '2025-08-01', time: '09:40', name: 'Sneha Reddy', reason: 'Skin Allergy', contact: '+918765432100', token: 5, reminder: 'No' }
];

function renderTable(filtered = data) {
  const tbody = document.getElementById('tableBody');
  tbody.innerHTML = '';
  filtered.forEach(d => {
    const row = `<tr><td>${d.date}</td><td>${d.time}</td><td>${d.name}</td><td>${d.reason}</td><td>${d.contact}</td><td>${d.token}</td><td>${d.reminder}</td></tr>`;
    tbody.innerHTML += row;
  });
}

function exportTableToExcel(id) {
  const table = document.getElementById(id);
  const wb = XLSX.utils.table_to_book(table);
  XLSX.writeFile(wb, 'Patient_Logs.xlsx');
}

function exportToPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text('Patient Logs', 10, 10);
  doc.autoTable({ html: '#patientTable' });
  doc.save('Patient_Logs.pdf');
}

function drawChart() {
  const ctx = document.getElementById('bookingChart').getContext('2d');
  const countByReason = {};
  data.forEach(d => countByReason[d.reason] = (countByReason[d.reason] || 0) + 1);
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(countByReason),
      datasets: [{
        label: 'Visit Reasons',
        data: Object.values(countByReason),
        backgroundColor: 'rgba(54, 162, 235, 0.6)'
      }]
    }
  });
}

function applyFilters() {
  const name = document.getElementById('searchName').value.toLowerCase();
  const reason = document.getElementById('searchReason').value.toLowerCase();
  const date = document.getElementById('filterDate').value;
  const filtered = data.filter(d =>
    (!name || d.name.toLowerCase().includes(name)) &&
    (!reason || d.reason.toLowerCase().includes(reason)) &&
    (!date || d.date === date)
  );
  renderTable(filtered);
}

document.getElementById('searchName').addEventListener('input', applyFilters);
document.getElementById('searchReason').addEventListener('input', applyFilters);
document.getElementById('filterDate').addEventListener('change', applyFilters);

renderTable();
drawChart();
</script></body>
</html>
