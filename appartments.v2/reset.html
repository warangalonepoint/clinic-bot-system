<!doctype html>
<html>
<body style="font-family:system-ui;padding:20px">
<h3>SW Reset</h3>

<button style="padding:10px 14px;border-radius:10px;font-weight:700"
onclick="(async()=>{try{
  // unregister all service workers
  const regs = await navigator.serviceWorker.getRegistrations();
  for(const r of regs) await r.unregister();

  // clear caches
  if(window.caches){
    for(const k of await caches.keys()) await caches.delete(k);
  }

  // kill future SW registration until you re-enable manually
  localStorage.setItem('apt_sw','off');

  alert('Service Worker disabled + caches cleared. Reloadingâ€¦');
  location.href='./index.html?v='+Date.now();
}catch(e){
  alert('Reset failed');
  console.error(e);
}})()">Unregister SW + Clear Caches</button>

<p style="margin-top:20px;font-size:14px;color:#555">
Tip: If you want to re-enable service worker later, open DevTools Console and run:<br>
<code>localStorage.removeItem('apt_sw'); location.reload();</code>
</p>
</body>
</html>
