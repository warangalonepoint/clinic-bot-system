<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Fees</title>
<link rel="stylesheet" href="styles.css?v=3">
<script src="i18n.js?v=3"></script>
<script src="theme.js?v=3" defer></script>
<script src="banner.js?v=3" defer></script>
<script src="app.js?v=3" defer></script>
</head><body>
<div class="wrap">
  <div id="app-banner"></div>
  <div class="card">
    <h2>ðŸ’³ <span data-i18n="fees">Fees</span></h2>
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <input id="amt" class="input" type="number" placeholder="Amount (â‚¹)">
      <input id="mode" class="input" placeholder="Mode (UPI/Cash)">
      <button class="btn" id="payBtn">Add Payment</button>
    </div>
  </div>
  <div class="card">
    <b>My Ledger</b>
    <table class="table"><thead><tr><th>Date</th><th>Amount</th><th>Mode</th></tr></thead><tbody id="mine"></tbody></table>
    <p class="muted" id="mineEmpty" style="display:none">No payments yet.</p>
    <p><b>Total Paid:</b> <span id="totalPaid">â‚¹0</span></p>
  </div>
  <footer>Â© Padmashali Community â€” V1</footer>
</div>
<script>
const s=JSON.parse(localStorage.getItem("pc_session")||"null"); if(!s){location.href='index.html';}
const UID=localStorage.getItem('pc_uid'); const K='pc_fees';
function getAll(){return JSON.parse(localStorage.getItem(K)||'[]');}
function setAll(v){localStorage.setItem(K,JSON.stringify(v));}
function fmt(x){return 'â‚¹'+Number(x).toLocaleString('en-IN');}
payBtn.onclick=()=>{const amt=Number(amt.value||0), mode=mode.value||''; if(!amt||!mode){alert('Enter amount & mode');return;}
  const L=getAll(); L.push({id:'F'+Date.now().toString(36),uid:UID,amount:amt,mode,ts:Date.now()}); setAll(L); amt.value=''; mode.value=''; render();};
function render(){const mine=getAll().filter(x=>x.uid===UID).sort((a,b)=>b.ts-a.ts); mineEl.innerHTML='';
  let sum=0; const T=document.getElementById('mine'); T.innerHTML=''; document.getElementById('mineEmpty').style.display=mine.length?'none':'block';
  mine.forEach(x=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${new Date(x.ts).toLocaleDateString('en-IN')}</td><td>${fmt(x.amount)}</td><td>${x.mode}</td>`; T.appendChild(tr); sum+=x.amount;});
  document.getElementById('totalPaid').textContent=fmt(sum);
}
const mineEl=document.getElementById('mine'); render();
</script>
</body></html>
